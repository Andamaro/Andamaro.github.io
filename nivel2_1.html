<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Nivel 2-1: Fracciones visuales</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <link href="https://fonts.googleapis.com/css2?family=Palanquin+Dark&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Palanquin Dark', sans-serif;
      background-color: #171B2A;
      color: white;
      margin: 0;
      padding: 0;
    }

    .progress-bar {
      height: 8px;
      background-color: #212638;
      width: 100%;
    }

    .progress {
      height: 100%;
      width: 0%;
      background-color: #3690F7;
      transition: width 0.3s ease;
    }

    .container {
      padding: 24px 20px;
      max-width: 500px;
      margin: 0 auto;
    }

    .ejercicio {
      display: none;
      animation: fadeIn 0.3s ease-in-out;
    }

    .ejercicio.active {
      display: block;
    }

    h2 {
      font-size: 1.3em;
      text-align: center;
    }

    p {
      text-align: center;
    }

    img {
      display: block;
      margin: 20px auto;
      max-width: 90%;
      border-radius: 12px;
    }

    input {
      display: block;
      margin: 10px auto;
      padding: 10px;
      font-size: 1em;
      border-radius: 6px;
      border: none;
      width: 60%;
      text-align: center;
    }

    button {
      display: block;
      margin: 20px auto 0;
      background-color: #3690F7;
      color: white;
      border: none;
      border-radius: 8px;
      padding: 12px 20px;
      font-size: 1em;
      cursor: pointer;
      transition: background 0.3s;
    }

    button:hover {
      background-color: #4aa4ff;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .mensaje {
      text-align: center;
      font-weight: bold;
      margin-top: 10px;
    }

    .mensaje.correcto {
      color: #27ae60;
    }

    .mensaje.incorrecto {
      color: #e74c3c;
    }
  </style>
</head>
<body>

  <div class="progress-bar">
    <div id="progress" class="progress"></div>
  </div>

  <div class="container">
    <!-- Ejercicio 1 -->
    <div class="ejercicio active">
      <h2>üç∞ ¬øQu√© fracci√≥n representa esta imagen?</h2>
      <img src="1_2.png" alt="Tarta dividida">
      <input type="text" placeholder="Ej. 1/2" />
      <div class="mensaje"></div>
      <button onclick="verificar(0)">Verificar</button>
    </div>

    <!-- Ejercicio 2 -->
    <div class="ejercicio">
      <h2>üçï ¬øQu√© fracci√≥n representa la pizza tomada?</h2>
      <img src="img/3-6.png" alt="Pizza">
      <input type="text" placeholder="Ej. 1/2" />
      <div class="mensaje"></div>
      <button onclick="verificar(1)">Verificar</button>
    </div>

    <!-- Ejercicio 3 -->
    <div class="ejercicio">
      <h2>üü¶ ¬øQu√© fracci√≥n est√° coloreada?</h2>
      <img src="img/2-4.png" alt="Figuras azules">
      <input type="text" placeholder="Ej. 1/2" />
      <div class="mensaje"></div>
      <button onclick="verificar(2)">Verificar</button>
    </div>

    <!-- Final -->
    <div class="ejercicio" id="final" style="display:none;">
      <h2>¬°Nivel completado! üéâ</h2>
      <p>¬°Muy bien! Has entendido las fracciones visuales.</p>
      <button onclick="window.location.href='index.html'">Volver al inicio</button>
    </div>
  </div>

  <audio id="clickAudio" src="Click.mp3" preload="auto"></audio>

  <script>
    const ejercicios = document.querySelectorAll('.ejercicio');
    const barra = document.getElementById("progress");
    const audio = document.getElementById("clickAudio");
    const respuestasValidas = [
      ["1/2", "2/4", "4/8", "3/6", "6/12"],
      ["1/2", "3/6", "4/8", "6/12"],
      ["1/2", "2/4", "4/8"]
    ];

    let actual = 0;

    function verificar(i) {
      const input = ejercicios[i].querySelector("input");
      const mensaje = ejercicios[i].querySelector(".mensaje");
      const valor = input.value.replace(/\s/g, "").toLowerCase();

      audio.currentTime = 0;
      audio.play();

      if (respuestasValidas[i].includes(valor)) {
        mensaje.textContent = "¬°Correcto!";
        mensaje.className = "mensaje correcto";
        setTimeout(() => {
          siguiente();
        }, 1000);
      } else {
        mensaje.textContent = "Int√©ntalo de nuevo";
        mensaje.className = "mensaje incorrecto";
      }
    }

    function siguiente() {
      ejercicios[actual].classList.remove("active");
      actual++;
      if (actual < ejercicios.length - 1) {
        ejercicios[actual].classList.add("active");
      } else {
        ejercicios[actual].style.display = "block";
      }
      actualizarBarra();
    }

    function actualizarBarra() {
      const porcentaje = (actual / (ejercicios.length - 1)) * 100;
      barra.style.width = porcentaje + "%";
    }

    window.onload = actualizarBarra;
  </script>

</body>
</html>
